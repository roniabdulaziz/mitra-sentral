<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Sentral Pulsa</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
* { box-sizing: border-box; }

body {
  margin: 0;
  font-family: system-ui, Arial, sans-serif;
  background: #f1f3f6;
  padding-bottom: 70px;
}

header {
  background: #1565c0;
  color: #fff;
  padding: 14px;
  text-align: center;
  font-size: 17px;
  font-weight: 600;
}

.container {
  padding: 14px;
}

.card {
  background: #fff;
  border-radius: 14px;
  padding: 14px;
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
  margin-bottom: 14px;
}

.member-card {
  background: linear-gradient(135deg, #1e88e5, #1565c0);
  color: #fff;
}

.member-name {
  font-size: 15px;
  opacity: 0.9;
}

.member-saldo {
  font-size: 26px;
  font-weight: 700;
  margin: 6px 0 12px;
}

.btn-topup {
  display: block;
  width: 100%;
  padding: 10px;
  background: #ffffff;
  color: #1565c0;
  border-radius: 20px;
  font-size: 14px;
  font-weight: 600;
  text-decoration: none;
  text-align: center;
}

label {
  display: block;
  margin-top: 12px;
  font-size: 13px;
  font-weight: 600;
}

input, select {
  width: 100%;
  padding: 10px;
  margin-top: 6px;
  border-radius: 8px;
  border: 1px solid #ccc;
  font-size: 14px;
}

.products {
  margin-top: 8px;
}

.product {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 10px;
  border: 1px solid #e0e0e0;
  border-radius: 8px;
  margin-bottom: 8px;
  font-size: 14px;
}

button {
  margin-top: 18px;
  width: 100%;
  padding: 12px;
  background: #1565c0;
  color: #fff;
  border: none;
  border-radius: 10px;
  font-size: 16px;
  font-weight: 600;
}

.note {
  text-align: center;
  font-size: 12px;
  color: #777;
  margin-top: 12px;
}

.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  height: 60px;
  background: #fff;
  border-top: 1px solid #ddd;
  display: flex;
  justify-content: space-around;
  align-items: center;
}

.bottom-nav a {
  text-decoration: none;
  color: #888;
  font-size: 11px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.bottom-nav a svg {
  width: 22px;
  height: 22px;
  margin-bottom: 3px;
  fill: currentColor;
}

.bottom-nav a.active {
  color: #1565c0;
}
</style>
</head>

<body>

<header>SENTRAL</header>

<div class="container">

  <!-- CARD MEMBER -->
  <div class="card member-card">
    <div class="member-name">
      Halo, <strong id="memberName">Member</strong>
    </div>

    <div class="member-saldo">
      Rp <span id="memberSaldo">0</span>
    </div>

    <a href="isi-saldo.html" class="btn-topup">
      Isi Saldo
    </a>
  </div>

  <!-- CARD TRANSAKSI -->
  <div class="card">

    <label>Kategori</label>
    <select>
      <option>Pilih Kategori</option>
      <option>Pulsa</option>
      <option>Paket Data</option>
      <option>Token PLN</option>
    </select>

    <label>Produk</label>
    <div class="products">
      <div class="product">
        <span>Pulsa 10.000</span>
        <strong>Rp11.500</strong>
      </div>
      <div class="product">
        <span>Pulsa 20.000</span>
        <strong>Rp21.500</strong>
      </div>
      <div class="product">
        <span>Pulsa 50.000</span>
        <strong>Rp51.500</strong>
      </div>
    </div>

    <label>Nomor HP</label>
    <input type="text" placeholder="08xxxxxxxxxx">

    <button>BELI SEKARANG</button>

    <div class="note">Transaksi otomatis â€¢ 24 jam</div>
  </div>
</div>

<nav class="bottom-nav">
  <a href="index.html" class="active"><span>Transaksi</span></a>
  <a href="riwayat.html"><span>Riwayat</span></a>
  <a href="akun.html"><span>Akun</span></a>
</nav>

<!-- ðŸ” GUARD -->
<script src="guard.js"></script>

<!-- SUPABASE -->
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

<script>
const SUPABASE_URL = "https://igtrnhjexdxymgoufnoy.supabase.co";
const SUPABASE_ANON_KEY =
"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImlndHJuaGpleGR4eW1nb3Vmbm95Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjcwNjY3NTMsImV4cCI6MjA4MjY0Mjc1M30.r1c85loIq2uqsbqaUQ-Jc7t3R8Lhi3iEiHArXGgw3gc";

const sb = window.supabase.createClient(
  SUPABASE_URL,
  SUPABASE_ANON_KEY
);

const memberId = localStorage.getItem("member_id");
const memberName = localStorage.getItem("member_nama");

document.getElementById("memberName").textContent = memberName || "Member";

async function loadSaldo() {
  const { data, error } = await sb
    .from("members")
    .select("saldo")
    .eq("id", memberId)
    .single();

  if (data) {
    document.getElementById("memberSaldo").textContent =
      Number(data.saldo).toLocaleString("id-ID");
  }
}

loadSaldo();
</script>

</body>
</html>
